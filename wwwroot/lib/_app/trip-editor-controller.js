!function(){function t(t,s){var e=this;e.tripName=s.tripName,e.stops=[],e.errorMessage="",e.isBusy=!0,e.newStop={},t.get("/api/trips/"+e.tripName+"/stops").then(function(t){angular.copy(t.data,e.stops),o(e.stops),e.errorMessage=""},function(t){e.errorMessage="Failed to load stops"}).finally(function(){e.isBusy=!1}),e.addStop=function(){e.isBusy=!0,e.errorMessage="",t.post("/api/trips/"+e.tripName+"/stops",e.newStop).then(function(t){e.stops.push(t.data),o(e.stops),e.newStop={}},function(t){e.errorMessage="Failed to save new stop"}).finally(function(){e.isBusy=!1})}}function o(t){if(t&&stop.length>0){var o=_.map(t,function(t){return{lat:t.latitude,long:t.longitude,info:t.name}});travelMap.createMap({stops:o,selector:"#map",currentStop:1,initialZoom:3})}}t.$inject=["$http","$routeParams"],angular.module("app-trips").controller("trip-editor-controller",t)}();